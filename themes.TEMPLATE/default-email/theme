#!/usr/bin/env bb
;; vim: ft=clojure
(require '[hiccup2.core :refer [html]])
(require '[hiccup.util :refer [raw-string]])

(defn render [post]
  [:html
   [:body
    [:h1 (:post/title post)]
    (raw-string (:post/html post))
    [:br]
    [:br]
    [:hr]
    [:div [:a {:href "%mailing_list_unsubscribe_url%"} "Unsubscribe"]]]])

(defn main [{:keys [post] :as opts}]
  {:html (str (html (render post)))})

(main *input*)
